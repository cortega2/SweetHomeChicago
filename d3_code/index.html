<!DOCTYPE html>
<html>
<head>
	<title>Sweet Home Chicago 0.1</title>
	<script type="text/javascript" src="d3.v3.min.js" charset="utf-8"></script>
	<link rel="stylesheet" type="text/css" href="style.css">

    <style>
      /*html, body, #map{
        height: 100%;
        margin: 0px;
        padding: 0px
      }*/
    </style>
</head>

<body>
    <div id = "drawSpace"></div>
    <script type="text/javascript" src = "houseFunct.js"></script>
	<script type="text/javascript">
        // 
        var viewboxHeight = 814;
        var viewboxWidth = 1600;

        // add viewbox to the drawSpace
        var svg = d3.select("#drawSpace")
            .append("svg")
            .attr("viewBox", "0 0 " + viewboxWidth + " " + viewboxHeight)
            .attr("preserveAspectRatio", "xMidYMid meet");

        // make objects that control the different draw areas 
        var overall = new overallSpace(svg, viewboxWidth, viewboxHeight);
        var mapArea = new mapArea(svg, viewboxWidth, viewboxHeight);
        var community = new community(svg, viewboxWidth, viewboxHeight);

        mapArea.setComObj(community);

        d3.json("../data/geo/healthcare_providers_dentists.json", function(data){           
            mapArea.drawMap(data);
        });

        // testing stuff
        var foo;
        d3.csv("../data/cityWide/poverty_status_age.csv", function(data){
            foo = data;
            for (var i = foo.length - 1; i >= 0; i--) {
                foo[i].value = parseInt(foo[i].value);
            };
            overall.makeDonut(foo, "age", "value")
            overall.addData(foo);
        });

        var foo2;
        d3.csv("../data/cityWide/poverty_status_race.csv", function(data){
            foo2 = data;
            for (var i = foo2.length - 1; i >= 0; i--) {
                foo2[i].value = parseInt(foo2[i].value);
            };
            overall.addData(foo2);
        });


        // not working...not sure why!
        // d3.json("../data/geo/everyblock-neighborhoods-chicago.json", function(error, data){            
        //     if(error){
        //         console.log(error);
        //     }

        //     foo = data;

        //     var center = d3.geo.centroid(data);
        //     var scale = 60000;
        //     var offset = [400, 400];
        //     var projection = d3.geo
        //         .mercator()
        //         .scale(scale)
        //         .center(center)
        //         .translate(offset);

        //     var path = d3.geo.path().projection(projection);

        //     canvas2.selectAll("path")
        //         .data(data)
        //         .enter()
        //             .append("path")
        //             .attr("d", path);
        // });
	</script>	
</body>
</html>